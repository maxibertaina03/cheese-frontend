{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useElementos.ts\nimport { useCallback, useState } from 'react';\nimport { apiService } from '../services/api';\nexport const useElementos = apiFetch => {\n  _s();\n  const [elementos, setElementos] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const fetchElementos = useCallback(async () => {\n    try {\n      const response = await apiService.getElementos(apiFetch);\n      const data = await response.json();\n      setElementos(data);\n    } catch (err) {\n      console.error('Error al cargar elementos:', err);\n    }\n  }, [apiFetch]);\n  const fetchMovimientos = useCallback(async elementoId => {\n    try {\n      const response = await apiService.getElementoMovimientos(apiFetch, elementoId);\n      if (!response.ok) {\n        const errorData = await response.json();\n        setError(errorData.error || 'Error al cargar movimientos');\n        return [];\n      }\n      const data = await response.json();\n      return data;\n    } catch (err) {\n      setError('Error de conexión con el servidor');\n      return [];\n    }\n  }, [apiFetch]);\n  const createElemento = async data => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await apiService.createElemento(apiFetch, data);\n      if (response.ok) {\n        setSuccess('Elemento creado correctamente');\n        await fetchElementos();\n        setTimeout(() => setSuccess(''), 3000);\n        return {\n          success: true\n        };\n      }\n      const errorData = await response.json();\n      setError(errorData.error || 'Error al crear elemento');\n      return {\n        success: false\n      };\n    } catch (err) {\n      setError('Error de conexión con el servidor');\n      return {\n        success: false\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n  const updateElemento = async (elementoId, data) => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await apiService.updateElemento(apiFetch, elementoId, data);\n      if (response.ok) {\n        setSuccess('Elemento actualizado correctamente');\n        await fetchElementos();\n        setTimeout(() => setSuccess(''), 3000);\n        return {\n          success: true\n        };\n      }\n      const errorData = await response.json();\n      setError(errorData.error || 'Error al actualizar elemento');\n      return {\n        success: false\n      };\n    } catch (err) {\n      setError('Error de conexión con el servidor');\n      return {\n        success: false\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n  const deleteElemento = async elementoId => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await apiService.deleteElemento(apiFetch, elementoId);\n      if (response.ok) {\n        setSuccess('Elemento eliminado correctamente');\n        await fetchElementos();\n        setTimeout(() => setSuccess(''), 3000);\n        return {\n          success: true\n        };\n      }\n      const errorData = await response.json();\n      setError(errorData.error || 'Error al eliminar elemento');\n      return {\n        success: false\n      };\n    } catch (err) {\n      setError('Error de conexión con el servidor');\n      return {\n        success: false\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n  const registrarIngreso = async (elementoId, data) => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await apiService.elementoIngreso(apiFetch, elementoId, data);\n      if (response.ok) {\n        setSuccess('Ingreso registrado correctamente');\n        await fetchElementos();\n        setTimeout(() => setSuccess(''), 3000);\n        return {\n          success: true\n        };\n      }\n      const errorData = await response.json();\n      setError(errorData.error || 'Error al registrar ingreso');\n      return {\n        success: false\n      };\n    } catch (err) {\n      setError('Error de conexi con el servidor');\n      return {\n        success: false\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n  const registrarEgreso = async (elementoId, data) => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await apiService.elementoEgreso(apiFetch, elementoId, data);\n      if (response.ok) {\n        setSuccess('Egreso registrado correctamente');\n        await fetchElementos();\n        setTimeout(() => setSuccess(''), 3000);\n        return {\n          success: true\n        };\n      }\n      const errorData = await response.json();\n      setError(errorData.error || 'Error al registrar egreso');\n      return {\n        success: false\n      };\n    } catch (err) {\n      setError('Error de conexiÃ³n con el servidor');\n      return {\n        success: false\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n  return {\n    elementos,\n    loading,\n    error,\n    success,\n    fetchElementos,\n    fetchMovimientos,\n    createElemento,\n    updateElemento,\n    deleteElemento,\n    registrarIngreso,\n    registrarEgreso,\n    setError,\n    setSuccess\n  };\n};\n_s(useElementos, \"Iv1aM+f4YjIQY6bPVZKN+9zMGxs=\");","map":{"version":3,"names":["useCallback","useState","apiService","useElementos","apiFetch","_s","elementos","setElementos","loading","setLoading","error","setError","success","setSuccess","fetchElementos","response","getElementos","data","json","err","console","fetchMovimientos","elementoId","getElementoMovimientos","ok","errorData","createElemento","setTimeout","updateElemento","deleteElemento","registrarIngreso","elementoIngreso","registrarEgreso","elementoEgreso"],"sources":["C:/Users/Usuario/Desktop/sistema-stock/cheese-frontend/src/hooks/useElementos.ts"],"sourcesContent":["// src/hooks/useElementos.ts\nimport { useCallback, useState } from 'react';\nimport { Elemento, MovimientoElemento } from '../types';\nimport { apiService } from '../services/api';\n\nexport const useElementos = (apiFetch: any) => {\n  const [elementos, setElementos] = useState<Elemento[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  const fetchElementos = useCallback(async () => {\n    try {\n      const response = await apiService.getElementos(apiFetch);\n      const data = await response.json();\n      setElementos(data);\n    } catch (err) {\n      console.error('Error al cargar elementos:', err);\n    }\n  }, [apiFetch]);\n\n  const fetchMovimientos = useCallback(\n    async (elementoId: number): Promise<MovimientoElemento[]> => {\n      try {\n        const response = await apiService.getElementoMovimientos(apiFetch, elementoId);\n        if (!response.ok) {\n          const errorData = await response.json();\n          setError(errorData.error || 'Error al cargar movimientos');\n          return [];\n        }\n        const data = await response.json();\n        return data;\n      } catch (err) {\n        setError('Error de conexión con el servidor');\n        return [];\n      }\n    },\n    [apiFetch]\n  );\n\n  const createElemento = async (data: {\n    nombre: string;\n    cantidadTotal: number;\n    descripcion?: string | null;\n  }) => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await apiService.createElemento(apiFetch, data);\n      if (response.ok) {\n        setSuccess('Elemento creado correctamente');\n        await fetchElementos();\n        setTimeout(() => setSuccess(''), 3000);\n        return { success: true };\n      }\n      const errorData = await response.json();\n      setError(errorData.error || 'Error al crear elemento');\n      return { success: false };\n    } catch (err) {\n      setError('Error de conexión con el servidor');\n      return { success: false };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateElemento = async (elementoId: number, data: { nombre: string; descripcion?: string | null }) => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await apiService.updateElemento(apiFetch, elementoId, data);\n      if (response.ok) {\n        setSuccess('Elemento actualizado correctamente');\n        await fetchElementos();\n        setTimeout(() => setSuccess(''), 3000);\n        return { success: true };\n      }\n      const errorData = await response.json();\n      setError(errorData.error || 'Error al actualizar elemento');\n      return { success: false };\n    } catch (err) {\n      setError('Error de conexión con el servidor');\n      return { success: false };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteElemento = async (elementoId: number) => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await apiService.deleteElemento(apiFetch, elementoId);\n      if (response.ok) {\n        setSuccess('Elemento eliminado correctamente');\n        await fetchElementos();\n        setTimeout(() => setSuccess(''), 3000);\n        return { success: true };\n      }\n      const errorData = await response.json();\n      setError(errorData.error || 'Error al eliminar elemento');\n      return { success: false };\n    } catch (err) {\n      setError('Error de conexión con el servidor');\n      return { success: false };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const registrarIngreso = async (elementoId: number, data: { cantidad: number; observaciones?: string | null }) => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await apiService.elementoIngreso(apiFetch, elementoId, data);\n      if (response.ok) {\n        setSuccess('Ingreso registrado correctamente');\n        await fetchElementos();\n        setTimeout(() => setSuccess(''), 3000);\n        return { success: true };\n      }\n      const errorData = await response.json();\n      setError(errorData.error || 'Error al registrar ingreso');\n      return { success: false };\n    } catch (err) {\n      setError('Error de conexi con el servidor');\n      return { success: false };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const registrarEgreso = async (\n    elementoId: number,\n    data: { cantidad: number; motivoId?: number | null; observaciones?: string | null }\n  ) => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await apiService.elementoEgreso(apiFetch, elementoId, data);\n      if (response.ok) {\n        setSuccess('Egreso registrado correctamente');\n        await fetchElementos();\n        setTimeout(() => setSuccess(''), 3000);\n        return { success: true };\n      }\n      const errorData = await response.json();\n      setError(errorData.error || 'Error al registrar egreso');\n      return { success: false };\n    } catch (err) {\n      setError('Error de conexiÃ³n con el servidor');\n      return { success: false };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return {\n    elementos,\n    loading,\n    error,\n    success,\n    fetchElementos,\n    fetchMovimientos,\n    createElemento,\n    updateElemento,\n    deleteElemento,\n    registrarIngreso,\n    registrarEgreso,\n    setError,\n    setSuccess,\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}