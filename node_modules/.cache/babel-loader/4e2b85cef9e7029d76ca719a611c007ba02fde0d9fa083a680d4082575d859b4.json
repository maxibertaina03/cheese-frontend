{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Usuario\\\\Desktop\\\\cheese-stock-system\\\\frontend\\\\src\\\\App.tsx\",\n  _s = $RefreshSig$();\n// src/App.tsx - Versión corregida\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\n// ✅ Agregar FiltroHistorial\nimport { createApiFetch } from './services/api';\nimport { useAuth } from './hooks/useAuth';\nimport { useInventory } from './hooks/useInventory';\nimport { useHistorial } from './hooks/useHistorial';\nimport { Login } from './components/Auth/Login';\nimport { Header } from './components/Layout/Header';\nimport { Alerts } from './components/Layout/Alerts';\nimport { InventoryForm } from './components/Inventory/InventoryForm';\nimport { InventoryList } from './components/Inventory/InventoryList';\nimport { EditModal } from './components/Modals/EditModal';\nimport { CutModal } from './components/Modals/CutModal';\nimport { HistorialModal } from './components/Modals/HistorialModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const {\n    user,\n    setUser\n  } = useAuth();\n  const [showForm, setShowForm] = useState(false);\n  const [dataLoaded, setDataLoaded] = useState(false);\n  const [tiposQueso, setTiposQueso] = useState([]);\n\n  // Modals state\n  const [showCutModal, setShowCutModal] = useState(false);\n  const [unidadParaCortar, setUnidadParaCortar] = useState(null);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [unidadParaEditar, setUnidadParaEditar] = useState(null);\n\n  // API fetch con autenticación\n  const apiFetch = createApiFetch(user === null || user === void 0 ? void 0 : user.token, () => {\n    setUser(null);\n    localStorage.removeItem('token');\n    alert('Sesión expirada. Por favor, inicia sesión nuevamente.');\n  });\n\n  // Hooks personalizados\n  const {\n    unidades,\n    productos,\n    motivos,\n    loading,\n    error,\n    success,\n    fetchUnidades,\n    fetchProductos,\n    fetchMotivos,\n    createUnidad,\n    updateUnidad,\n    createParticion\n  } = useInventory(apiFetch); // ✅ Removido setError que no usas\n\n  const {\n    historialFiltrado,\n    showHistorial,\n    filtroHistorial,\n    busquedaHistorial,\n    fechaInicio,\n    fechaFin,\n    tipoQuesoFiltro,\n    statsHistorial,\n    setFiltroHistorial,\n    setBusquedaHistorial,\n    setFechaInicio,\n    setFechaFin,\n    setTipoQuesoFiltro,\n    openHistorial,\n    closeHistorial,\n    historialUnidades\n  } = useHistorial(apiFetch);\n\n  // Cargar datos iniciales\n  useEffect(() => {\n    if (user !== null && user !== void 0 && user.token && !dataLoaded) {\n      fetchData();\n      setDataLoaded(true);\n    }\n  }, [user, dataLoaded]);\n  const fetchData = async () => {\n    await Promise.all([fetchUnidades(), fetchProductos(), fetchMotivos(), fetchTiposQueso()]);\n  };\n  const fetchTiposQueso = async () => {\n    try {\n      const response = await apiFetch(`${process.env.REACT_APP_API_URL}/api/tipos-queso`);\n      const data = await response.json();\n      setTiposQueso(data);\n    } catch (error) {\n      console.error('Error al cargar tipos de queso:', error);\n    }\n  };\n\n  // Handlers para modales\n  const handleOpenCutModal = unidad => {\n    setUnidadParaCortar(unidad);\n    setShowCutModal(true);\n  };\n  const handleCloseCutModal = () => {\n    setShowCutModal(false);\n    setUnidadParaCortar(null);\n  };\n  const handleCut = async (peso, observaciones, motivoId) => {\n    if (!unidadParaCortar) return;\n    const result = await createParticion(unidadParaCortar.id, peso, observaciones, motivoId);\n    if (result.success) {\n      handleCloseCutModal(); // ✅ Cerrar modal solo si fue exitoso\n    }\n  };\n  const handleEgresoTotal = async motivoId => {\n    if (!unidadParaCortar) return;\n    const result = await createParticion(unidadParaCortar.id, unidadParaCortar.pesoActual, 'Corte final – queso agotado', motivoId);\n    if (result.success) {\n      handleCloseCutModal();\n    }\n  };\n  const handleOpenEditModal = unidad => {\n    setUnidadParaEditar(unidad);\n    setShowEditModal(true);\n  };\n  const handleCloseEditModal = () => {\n    setShowEditModal(false);\n    setUnidadParaEditar(null);\n  };\n  const handleSaveEdit = async observaciones => {\n    if (!unidadParaEditar) return;\n    const result = await updateUnidad(unidadParaEditar.id, observaciones);\n    if (result.success) {\n      handleCloseEditModal();\n    }\n  };\n\n  // Handler para crear unidad con cierre de form\n  const handleCreateUnidad = async data => {\n    const result = await createUnidad(data);\n    if (result.success) {\n      setShowForm(false); // ✅ Cerrar formulario\n    }\n    return result;\n  };\n\n  // Funciones auxiliares para historial\n  const getStockActualProducto = productoId => {\n    return unidades.filter(u => u.producto.id === productoId && u.activa).length;\n  };\n  const getUnidadesAgotadasProducto = productoId => {\n    return historialUnidades.filter(u => u.producto.id === productoId && !u.activa).length;\n  };\n  const getPesoVendidoProducto = productoId => {\n    return historialUnidades.filter(u => u.producto.id === productoId && !u.activa).reduce((sum, u) => sum + Number(u.pesoInicial), 0);\n  };\n  if (!user) return /*#__PURE__*/_jsxDEV(Login, {\n    onLogin: setUser\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      unidadesActivas: unidades.filter(u => u.activa).length,\n      totalProductos: productos.length,\n      onNewIngreso: () => setShowForm(!showForm),\n      onOpenHistorial: openHistorial,\n      showForm: showForm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Alerts, {\n      error: error,\n      success: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this), showForm && /*#__PURE__*/_jsxDEV(InventoryForm, {\n      productos: productos,\n      motivos: motivos,\n      loading: loading,\n      onSubmit: handleCreateUnidad // ✅ Usar wrapper\n      ,\n      onClose: () => setShowForm(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(InventoryList, {\n      unidades: unidades.filter(u => u.activa),\n      onEdit: handleOpenEditModal,\n      onCut: handleOpenCutModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), showEditModal && /*#__PURE__*/_jsxDEV(EditModal, {\n      unidad: unidadParaEditar,\n      onClose: handleCloseEditModal,\n      onSave: handleSaveEdit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }, this), showCutModal && /*#__PURE__*/_jsxDEV(CutModal, {\n      unidad: unidadParaCortar,\n      productos: productos,\n      motivos: motivos,\n      loading: loading,\n      onClose: handleCloseCutModal,\n      onCut: handleCut,\n      onEgresoTotal: handleEgresoTotal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(HistorialModal, {\n      show: showHistorial,\n      unidades: historialFiltrado,\n      stats: statsHistorial,\n      filtroHistorial: filtroHistorial,\n      busquedaHistorial: busquedaHistorial,\n      fechaInicio: fechaInicio,\n      fechaFin: fechaFin,\n      tipoQuesoFiltro: tipoQuesoFiltro,\n      onClose: closeHistorial,\n      onSetFiltro: setFiltroHistorial,\n      onSetBusqueda: setBusquedaHistorial,\n      onSetFechaInicio: setFechaInicio,\n      onSetFechaFin: setFechaFin,\n      onSetTipoQueso: setTipoQuesoFiltro,\n      getStockActual: getStockActualProducto,\n      getUnidadesAgotadas: getUnidadesAgotadasProducto,\n      getPesoVendido: getPesoVendidoProducto\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"foOUl4dvPxdKlwWKjTGUppcjb8I=\", false, function () {\n  return [useAuth, useInventory, useHistorial];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","createApiFetch","useAuth","useInventory","useHistorial","Login","Header","Alerts","InventoryForm","InventoryList","EditModal","CutModal","HistorialModal","jsxDEV","_jsxDEV","App","_s","user","setUser","showForm","setShowForm","dataLoaded","setDataLoaded","tiposQueso","setTiposQueso","showCutModal","setShowCutModal","unidadParaCortar","setUnidadParaCortar","showEditModal","setShowEditModal","unidadParaEditar","setUnidadParaEditar","apiFetch","token","localStorage","removeItem","alert","unidades","productos","motivos","loading","error","success","fetchUnidades","fetchProductos","fetchMotivos","createUnidad","updateUnidad","createParticion","historialFiltrado","showHistorial","filtroHistorial","busquedaHistorial","fechaInicio","fechaFin","tipoQuesoFiltro","statsHistorial","setFiltroHistorial","setBusquedaHistorial","setFechaInicio","setFechaFin","setTipoQuesoFiltro","openHistorial","closeHistorial","historialUnidades","fetchData","Promise","all","fetchTiposQueso","response","process","env","REACT_APP_API_URL","data","json","console","handleOpenCutModal","unidad","handleCloseCutModal","handleCut","peso","observaciones","motivoId","result","id","handleEgresoTotal","pesoActual","handleOpenEditModal","handleCloseEditModal","handleSaveEdit","handleCreateUnidad","getStockActualProducto","productoId","filter","u","producto","activa","length","getUnidadesAgotadasProducto","getPesoVendidoProducto","reduce","sum","Number","pesoInicial","onLogin","fileName","_jsxFileName","lineNumber","columnNumber","className","children","unidadesActivas","totalProductos","onNewIngreso","onOpenHistorial","onSubmit","onClose","onEdit","onCut","onSave","onEgresoTotal","show","stats","onSetFiltro","onSetBusqueda","onSetFechaInicio","onSetFechaFin","onSetTipoQueso","getStockActual","getUnidadesAgotadas","getPesoVendido","_c","$RefreshReg$"],"sources":["C:/Users/Usuario/Desktop/cheese-stock-system/frontend/src/App.tsx"],"sourcesContent":["// src/App.tsx - Versión corregida\r\nimport React, { useState, useEffect } from 'react';\r\nimport './App.css';\r\nimport { User, Unidad, TipoQueso, FiltroHistorial } from './types'; // ✅ Agregar FiltroHistorial\r\nimport { createApiFetch } from './services/api';\r\nimport { useAuth } from './hooks/useAuth';\r\nimport { useInventory } from './hooks/useInventory';\r\nimport { useHistorial } from './hooks/useHistorial';\r\nimport { Login } from './components/Auth/Login';\r\nimport { Header } from './components/Layout/Header';\r\nimport { Alerts } from './components/Layout/Alerts';\r\nimport { InventoryForm } from './components/Inventory/InventoryForm';\r\nimport { InventoryList } from './components/Inventory/InventoryList';\r\nimport { EditModal } from './components/Modals/EditModal';\r\nimport { CutModal } from './components/Modals/CutModal';\r\nimport { HistorialModal } from './components/Modals/HistorialModal';\r\n\r\nfunction App() {\r\n  const { user, setUser } = useAuth();\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [dataLoaded, setDataLoaded] = useState(false);\r\n  const [tiposQueso, setTiposQueso] = useState<TipoQueso[]>([]);\r\n\r\n  // Modals state\r\n  const [showCutModal, setShowCutModal] = useState(false);\r\n  const [unidadParaCortar, setUnidadParaCortar] = useState<Unidad | null>(null);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [unidadParaEditar, setUnidadParaEditar] = useState<Unidad | null>(null);\r\n\r\n  // API fetch con autenticación\r\n  const apiFetch = createApiFetch(user?.token, () => {\r\n    setUser(null);\r\n    localStorage.removeItem('token');\r\n    alert('Sesión expirada. Por favor, inicia sesión nuevamente.');\r\n  });\r\n\r\n  // Hooks personalizados\r\n  const {\r\n    unidades,\r\n    productos,\r\n    motivos,\r\n    loading,\r\n    error,\r\n    success,\r\n    fetchUnidades,\r\n    fetchProductos,\r\n    fetchMotivos,\r\n    createUnidad,\r\n    updateUnidad,\r\n    createParticion,\r\n  } = useInventory(apiFetch); // ✅ Removido setError que no usas\r\n\r\n  const {\r\n    historialFiltrado,\r\n    showHistorial,\r\n    filtroHistorial,\r\n    busquedaHistorial,\r\n    fechaInicio,\r\n    fechaFin,\r\n    tipoQuesoFiltro,\r\n    statsHistorial,\r\n    setFiltroHistorial,\r\n    setBusquedaHistorial,\r\n    setFechaInicio,\r\n    setFechaFin,\r\n    setTipoQuesoFiltro,\r\n    openHistorial,\r\n    closeHistorial,\r\n    historialUnidades,\r\n  } = useHistorial(apiFetch);\r\n\r\n  // Cargar datos iniciales\r\n  useEffect(() => {\r\n    if (user?.token && !dataLoaded) {\r\n      fetchData();\r\n      setDataLoaded(true);\r\n    }\r\n  }, [user, dataLoaded]);\r\n\r\n  const fetchData = async () => {\r\n    await Promise.all([\r\n      fetchUnidades(),\r\n      fetchProductos(),\r\n      fetchMotivos(),\r\n      fetchTiposQueso(),\r\n    ]);\r\n  };\r\n\r\n  const fetchTiposQueso = async () => {\r\n    try {\r\n      const response = await apiFetch(`${process.env.REACT_APP_API_URL}/api/tipos-queso`);\r\n      const data = await response.json();\r\n      setTiposQueso(data);\r\n    } catch (error) {\r\n      console.error('Error al cargar tipos de queso:', error);\r\n    }\r\n  };\r\n\r\n  // Handlers para modales\r\n  const handleOpenCutModal = (unidad: Unidad) => {\r\n    setUnidadParaCortar(unidad);\r\n    setShowCutModal(true);\r\n  };\r\n\r\n  const handleCloseCutModal = () => {\r\n    setShowCutModal(false);\r\n    setUnidadParaCortar(null);\r\n  };\r\n\r\n  const handleCut = async (peso: number, observaciones: string, motivoId: number | null) => {\r\n    if (!unidadParaCortar) return;\r\n    const result = await createParticion(\r\n      unidadParaCortar.id, \r\n      peso, \r\n      observaciones, \r\n      motivoId\r\n    );\r\n    if (result.success) {\r\n      handleCloseCutModal(); // ✅ Cerrar modal solo si fue exitoso\r\n    }\r\n  };\r\n\r\n  const handleEgresoTotal = async (motivoId: number | null) => {\r\n    if (!unidadParaCortar) return;\r\n    const result = await createParticion(\r\n      unidadParaCortar.id,\r\n      unidadParaCortar.pesoActual,\r\n      'Corte final – queso agotado',\r\n      motivoId\r\n    );\r\n    if (result.success) {\r\n      handleCloseCutModal();\r\n    }\r\n  };\r\n\r\n  const handleOpenEditModal = (unidad: Unidad) => {\r\n    setUnidadParaEditar(unidad);\r\n    setShowEditModal(true);\r\n  };\r\n\r\n  const handleCloseEditModal = () => {\r\n    setShowEditModal(false);\r\n    setUnidadParaEditar(null);\r\n  };\r\n\r\n  const handleSaveEdit = async (observaciones: string) => {\r\n    if (!unidadParaEditar) return;\r\n    const result = await updateUnidad(unidadParaEditar.id, observaciones);\r\n    if (result.success) {\r\n      handleCloseEditModal();\r\n    }\r\n  };\r\n\r\n  // Handler para crear unidad con cierre de form\r\n  const handleCreateUnidad = async (data: {\r\n    productoId: number;\r\n    pesoInicial: number;\r\n    observacionesIngreso: string | null;\r\n    motivoId: number | null;\r\n  }) => {\r\n    const result = await createUnidad(data);\r\n    if (result.success) {\r\n      setShowForm(false); // ✅ Cerrar formulario\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Funciones auxiliares para historial\r\n  const getStockActualProducto = (productoId: number) => {\r\n    return unidades.filter(u => u.producto.id === productoId && u.activa).length;\r\n  };\r\n\r\n  const getUnidadesAgotadasProducto = (productoId: number) => {\r\n    return historialUnidades.filter(u => u.producto.id === productoId && !u.activa).length;\r\n  };\r\n\r\n  const getPesoVendidoProducto = (productoId: number) => {\r\n    return historialUnidades\r\n      .filter(u => u.producto.id === productoId && !u.activa)\r\n      .reduce((sum, u) => sum + Number(u.pesoInicial), 0);\r\n  };\r\n\r\n  if (!user) return <Login onLogin={setUser} />;\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <Header\r\n        unidadesActivas={unidades.filter(u => u.activa).length}\r\n        totalProductos={productos.length}\r\n        onNewIngreso={() => setShowForm(!showForm)}\r\n        onOpenHistorial={openHistorial}\r\n        showForm={showForm}\r\n      />\r\n\r\n      <Alerts error={error} success={success} />\r\n\r\n      {showForm && (\r\n        <InventoryForm\r\n          productos={productos}\r\n          motivos={motivos}\r\n          loading={loading}\r\n          onSubmit={handleCreateUnidad} // ✅ Usar wrapper\r\n          onClose={() => setShowForm(false)}\r\n        />\r\n      )}\r\n\r\n      <InventoryList\r\n        unidades={unidades.filter(u => u.activa)}\r\n        onEdit={handleOpenEditModal}\r\n        onCut={handleOpenCutModal}\r\n      />\r\n\r\n      {showEditModal && (\r\n        <EditModal\r\n          unidad={unidadParaEditar}\r\n          onClose={handleCloseEditModal}\r\n          onSave={handleSaveEdit}\r\n        />\r\n      )}\r\n\r\n      {showCutModal && (\r\n        <CutModal\r\n          unidad={unidadParaCortar}\r\n          productos={productos}\r\n          motivos={motivos}\r\n          loading={loading}\r\n          onClose={handleCloseCutModal}\r\n          onCut={handleCut}\r\n          onEgresoTotal={handleEgresoTotal}\r\n        />\r\n      )}\r\n\r\n      <HistorialModal\r\n        show={showHistorial}\r\n        unidades={historialFiltrado}\r\n        stats={statsHistorial}\r\n        filtroHistorial={filtroHistorial}\r\n        busquedaHistorial={busquedaHistorial}\r\n        fechaInicio={fechaInicio}\r\n        fechaFin={fechaFin}\r\n        tipoQuesoFiltro={tipoQuesoFiltro}\r\n        onClose={closeHistorial}\r\n        onSetFiltro={setFiltroHistorial}\r\n        onSetBusqueda={setBusquedaHistorial}\r\n        onSetFechaInicio={setFechaInicio}\r\n        onSetFechaFin={setFechaFin}\r\n        onSetTipoQueso={setTipoQuesoFiltro}\r\n        getStockActual={getStockActualProducto}\r\n        getUnidadesAgotadas={getUnidadesAgotadasProducto}\r\n        getPesoVendido={getPesoVendidoProducto}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}