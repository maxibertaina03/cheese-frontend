{"ast":null,"code":"// src/components/Auth/Login.tsx\nconst handleLogin = async () => {\n  setLoading(true);\n  setError('');\n  try {\n    const res = await fetch(`${process.env.REACT_APP_API_URL}/api/auth/login`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username,\n        password\n      })\n    });\n    const data = await res.json();\n    console.log('Login response:', data); // Debug\n\n    if (res.ok) {\n      // Fix: acceder a data.user.rol en lugar de data.rol\n      onLogin({\n        token: data.token,\n        rol: data.user.rol // ← CORREGIDO\n      });\n    } else {\n      setError('Credenciales inválidas');\n    }\n  } catch (err) {\n    setError('Error de conexión');\n  } finally {\n    setLoading(false);\n  }\n};","map":{"version":3,"names":["handleLogin","setLoading","setError","res","fetch","process","env","REACT_APP_API_URL","method","headers","body","JSON","stringify","username","password","data","json","console","log","ok","onLogin","token","rol","user","err"],"sources":["C:/Users/Usuario/Desktop/cheese-stock-system/frontend/src/components/Auth/Login.tsx"],"sourcesContent":["// src/components/Auth/Login.tsx\r\nconst handleLogin = async () => {\r\n  setLoading(true);\r\n  setError('');\r\n\r\n  try {\r\n    const res = await fetch(`${process.env.REACT_APP_API_URL}/api/auth/login`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ username, password }),\r\n    });\r\n\r\n    const data = await res.json();\r\n    \r\n    console.log('Login response:', data); // Debug\r\n    \r\n    if (res.ok) {\r\n      // Fix: acceder a data.user.rol en lugar de data.rol\r\n      onLogin({ \r\n        token: data.token, \r\n        rol: data.user.rol  // ← CORREGIDO\r\n      });\r\n    } else {\r\n      setError('Credenciales inválidas');\r\n    }\r\n  } catch (err) {\r\n    setError('Error de conexión');\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};"],"mappings":"AAAA;AACA,MAAMA,WAAW,GAAG,MAAAA,CAAA,KAAY;EAC9BC,UAAU,CAAC,IAAI,CAAC;EAChBC,QAAQ,CAAC,EAAE,CAAC;EAEZ,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,iBAAiB,EAAE;MACzEC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEC,QAAQ;QAAEC;MAAS,CAAC;IAC7C,CAAC,CAAC;IAEF,MAAMC,IAAI,GAAG,MAAMZ,GAAG,CAACa,IAAI,CAAC,CAAC;IAE7BC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEH,IAAI,CAAC,CAAC,CAAC;;IAEtC,IAAIZ,GAAG,CAACgB,EAAE,EAAE;MACV;MACAC,OAAO,CAAC;QACNC,KAAK,EAAEN,IAAI,CAACM,KAAK;QACjBC,GAAG,EAAEP,IAAI,CAACQ,IAAI,CAACD,GAAG,CAAE;MACtB,CAAC,CAAC;IACJ,CAAC,MAAM;MACLpB,QAAQ,CAAC,wBAAwB,CAAC;IACpC;EACF,CAAC,CAAC,OAAOsB,GAAG,EAAE;IACZtB,QAAQ,CAAC,mBAAmB,CAAC;EAC/B,CAAC,SAAS;IACRD,UAAU,CAAC,KAAK,CAAC;EACnB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}