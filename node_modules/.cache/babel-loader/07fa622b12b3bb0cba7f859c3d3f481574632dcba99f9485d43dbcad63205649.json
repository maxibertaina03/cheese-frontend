{"ast":null,"code":"// src/utils/barcode.ts\n\nexport const decodificarBarcode = (barcode, productos) => {\n  if (barcode.length !== 13) {\n    return {\n      result: null,\n      error: 'El código debe tener exactamente 13 dígitos'\n    };\n  }\n  const plu = barcode.substring(2, 7);\n  const pesoStr = barcode.substring(7, 12);\n  const pesoGramos = parseInt(pesoStr, 10);\n  if (isNaN(pesoGramos) || pesoGramos <= 0) {\n    return {\n      result: null,\n      error: 'Peso inválido en código de barras'\n    };\n  }\n  const producto = productos.find(p => p.plu === plu);\n  if (!producto) {\n    return {\n      result: null,\n      error: `No se encontró producto con PLU: ${plu}`\n    };\n  }\n  return {\n    result: {\n      producto,\n      peso: pesoGramos\n    },\n    error: ''\n  };\n};","map":{"version":3,"names":["decodificarBarcode","barcode","productos","length","result","error","plu","substring","pesoStr","pesoGramos","parseInt","isNaN","producto","find","p","peso"],"sources":["C:/Users/Usuario/Desktop/cheese-stock-system/frontend/src/utils/barcode.ts"],"sourcesContent":["// src/utils/barcode.ts\r\nimport { Producto } from '../types';\r\n\r\nexport interface BarcodeResult {\r\n  producto: Producto;\r\n  peso: number;\r\n}\r\n\r\nexport const decodificarBarcode = (\r\n  barcode: string,\r\n  productos: Producto[]\r\n): { result: BarcodeResult | null; error: string } => {\r\n  if (barcode.length !== 13) {\r\n    return { result: null, error: 'El código debe tener exactamente 13 dígitos' };\r\n  }\r\n\r\n  const plu = barcode.substring(2, 7);\r\n  const pesoStr = barcode.substring(7, 12);\r\n  const pesoGramos = parseInt(pesoStr, 10);\r\n\r\n  if (isNaN(pesoGramos) || pesoGramos <= 0) {\r\n    return { result: null, error: 'Peso inválido en código de barras' };\r\n  }\r\n\r\n  const producto = productos.find(p => p.plu === plu);\r\n  if (!producto) {\r\n    return { result: null, error: `No se encontró producto con PLU: ${plu}` };\r\n  }\r\n\r\n  return { result: { producto, peso: pesoGramos }, error: '' };\r\n};"],"mappings":"AAAA;;AAQA,OAAO,MAAMA,kBAAkB,GAAGA,CAChCC,OAAe,EACfC,SAAqB,KAC+B;EACpD,IAAID,OAAO,CAACE,MAAM,KAAK,EAAE,EAAE;IACzB,OAAO;MAAEC,MAAM,EAAE,IAAI;MAAEC,KAAK,EAAE;IAA8C,CAAC;EAC/E;EAEA,MAAMC,GAAG,GAAGL,OAAO,CAACM,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC;EACnC,MAAMC,OAAO,GAAGP,OAAO,CAACM,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC;EACxC,MAAME,UAAU,GAAGC,QAAQ,CAACF,OAAO,EAAE,EAAE,CAAC;EAExC,IAAIG,KAAK,CAACF,UAAU,CAAC,IAAIA,UAAU,IAAI,CAAC,EAAE;IACxC,OAAO;MAAEL,MAAM,EAAE,IAAI;MAAEC,KAAK,EAAE;IAAoC,CAAC;EACrE;EAEA,MAAMO,QAAQ,GAAGV,SAAS,CAACW,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACR,GAAG,KAAKA,GAAG,CAAC;EACnD,IAAI,CAACM,QAAQ,EAAE;IACb,OAAO;MAAER,MAAM,EAAE,IAAI;MAAEC,KAAK,EAAE,oCAAoCC,GAAG;IAAG,CAAC;EAC3E;EAEA,OAAO;IAAEF,MAAM,EAAE;MAAEQ,QAAQ;MAAEG,IAAI,EAAEN;IAAW,CAAC;IAAEJ,KAAK,EAAE;EAAG,CAAC;AAC9D,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}