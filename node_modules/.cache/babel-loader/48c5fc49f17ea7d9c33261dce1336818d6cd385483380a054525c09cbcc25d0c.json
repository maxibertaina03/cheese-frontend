{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useInventory.ts\nimport { useState, useCallback } from 'react';\nimport { apiService } from '../services/api';\nexport const useInventory = apiFetch => {\n  _s();\n  const [unidades, setUnidades] = useState([]);\n  const [productos, setProductos] = useState([]);\n  const [motivos, setMotivos] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const fetchUnidades = useCallback(async () => {\n    try {\n      const response = await apiService.getUnidades(apiFetch);\n      const data = await response.json();\n      setUnidades(data);\n    } catch (error) {\n      console.error('Error al cargar unidades:', error);\n    }\n  }, [apiFetch]);\n  const fetchProductos = useCallback(async () => {\n    try {\n      const response = await apiService.getProductos(apiFetch);\n      const data = await response.json();\n      setProductos(data);\n    } catch (error) {\n      console.error('Error al cargar productos:', error);\n    }\n  }, [apiFetch]);\n  const fetchMotivos = useCallback(async () => {\n    try {\n      const response = await apiService.getMotivos(apiFetch);\n      const data = await response.json();\n      setMotivos(data);\n    } catch (error) {\n      console.error('Error al cargar motivos:', error);\n    }\n  }, [apiFetch]);\n  const createUnidad = async data => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await apiService.createUnidad(apiFetch, data);\n      if (response.ok) {\n        setSuccess('Unidad ingresada correctamente');\n        await fetchUnidades();\n        setTimeout(() => setSuccess(''), 3000);\n        return {\n          success: true\n        };\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Error al ingresar unidad');\n        return {\n          success: false\n        };\n      }\n    } catch (error) {\n      setError('Error de conexión con el servidor');\n      return {\n        success: false\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n  const updateUnidad = async (unidadId, observaciones) => {\n    try {\n      const response = await apiService.updateUnidad(apiFetch, unidadId, observaciones);\n      if (response.ok) {\n        setSuccess('Unidad actualizada correctamente');\n        await fetchUnidades();\n        setTimeout(() => setSuccess(''), 3000);\n        return {\n          success: true\n        };\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Error al actualizar unidad');\n        return {\n          success: false\n        };\n      }\n    } catch (error) {\n      setError('Error de conexión con el servidor');\n      return {\n        success: false\n      };\n    }\n  };\n  const createParticion = async (unidadId, peso, observacionesCorte, motivoId) => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await apiService.createParticion(apiFetch, unidadId, {\n        peso,\n        observacionesCorte,\n        motivoId\n      });\n      if (response.ok) {\n        setSuccess(`Corte registrado: ${peso}g`);\n        await fetchUnidades();\n        setTimeout(() => setSuccess(''), 3000);\n        return {\n          success: true\n        };\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Error al registrar el corte');\n        return {\n          success: false\n        };\n      }\n    } catch (error) {\n      setError('Error de conexión con el servidor');\n      return {\n        success: false\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n  const deleteUnidad = async unidadId => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await apiService.deleteUnidad(apiFetch, unidadId);\n      if (response.ok) {\n        setSuccess('Unidad eliminada correctamente');\n        await fetchUnidades();\n        setTimeout(() => setSuccess(''), 3000);\n        return {\n          success: true\n        };\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'Error al eliminar unidad');\n        return {\n          success: false\n        };\n      }\n    } catch (error) {\n      setError('Error de conexión con el servidor');\n      return {\n        success: false\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n  const clearMessages = () => {\n    setError('');\n    setSuccess('');\n  };\n  return {\n    unidades,\n    productos,\n    motivos,\n    loading,\n    error,\n    success,\n    fetchUnidades,\n    fetchProductos,\n    fetchMotivos,\n    createUnidad,\n    updateUnidad,\n    deleteUnidad,\n    // ← NUEVO\n    createParticion,\n    clearMessages,\n    setError,\n    setSuccess\n  };\n};\n_s(useInventory, \"Mj/ARVCXpUxgbJMu/qxWTQhQ/8E=\");","map":{"version":3,"names":["useState","useCallback","apiService","useInventory","apiFetch","_s","unidades","setUnidades","productos","setProductos","motivos","setMotivos","loading","setLoading","error","setError","success","setSuccess","fetchUnidades","response","getUnidades","data","json","console","fetchProductos","getProductos","fetchMotivos","getMotivos","createUnidad","ok","setTimeout","errorData","updateUnidad","unidadId","observaciones","createParticion","peso","observacionesCorte","motivoId","deleteUnidad","clearMessages"],"sources":["C:/Users/Usuario/Desktop/sistema-stock/cheese-frontend/src/hooks/useInventory.ts"],"sourcesContent":["// src/hooks/useInventory.ts\r\nimport { useState, useCallback } from 'react';\r\nimport { Unidad, Producto, Motivo } from '../types';\r\nimport { apiService } from '../services/api';\r\n\r\nexport const useInventory = (apiFetch: any) => {\r\n  const [unidades, setUnidades] = useState<Unidad[]>([]);\r\n  const [productos, setProductos] = useState<Producto[]>([]);\r\n  const [motivos, setMotivos] = useState<Motivo[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  const fetchUnidades = useCallback(async () => {\r\n    try {\r\n      const response = await apiService.getUnidades(apiFetch);\r\n      const data = await response.json();\r\n      setUnidades(data);\r\n    } catch (error) {\r\n      console.error('Error al cargar unidades:', error);\r\n    }\r\n  }, [apiFetch]);\r\n\r\n  const fetchProductos = useCallback(async () => {\r\n    try {\r\n      const response = await apiService.getProductos(apiFetch);\r\n      const data = await response.json();\r\n      setProductos(data);\r\n    } catch (error) {\r\n      console.error('Error al cargar productos:', error);\r\n    }\r\n  }, [apiFetch]);\r\n\r\n  const fetchMotivos = useCallback(async () => {\r\n    try {\r\n      const response = await apiService.getMotivos(apiFetch);\r\n      const data = await response.json();\r\n      setMotivos(data);\r\n    } catch (error) {\r\n      console.error('Error al cargar motivos:', error);\r\n    }\r\n  }, [apiFetch]);\r\n\r\n  const createUnidad = async (data: {\r\n    productoId: number;\r\n    pesoInicial: number;\r\n    observacionesIngreso: string | null;\r\n    motivoId: number | null;\r\n  }) => {\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await apiService.createUnidad(apiFetch, data);\r\n\r\n      if (response.ok) {\r\n        setSuccess('Unidad ingresada correctamente');\r\n        await fetchUnidades();\r\n        setTimeout(() => setSuccess(''), 3000);\r\n        return { success: true };\r\n      } else {\r\n        const errorData = await response.json();\r\n        setError(errorData.error || 'Error al ingresar unidad');\r\n        return { success: false };\r\n      }\r\n    } catch (error) {\r\n      setError('Error de conexión con el servidor');\r\n      return { success: false };\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateUnidad = async (unidadId: number, observaciones: string) => {\r\n    try {\r\n      const response = await apiService.updateUnidad(apiFetch, unidadId, observaciones);\r\n\r\n      if (response.ok) {\r\n        setSuccess('Unidad actualizada correctamente');\r\n        await fetchUnidades();\r\n        setTimeout(() => setSuccess(''), 3000);\r\n        return { success: true };\r\n      } else {\r\n        const errorData = await response.json();\r\n        setError(errorData.error || 'Error al actualizar unidad');\r\n        return { success: false };\r\n      }\r\n    } catch (error) {\r\n      setError('Error de conexión con el servidor');\r\n      return { success: false };\r\n    }\r\n  };\r\n\r\n  const createParticion = async (\r\n    unidadId: number,\r\n    peso: number,\r\n    observacionesCorte: string,\r\n    motivoId: number | null\r\n  ) => {\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      const response = await apiService.createParticion(apiFetch, unidadId, {\r\n        peso,\r\n        observacionesCorte,\r\n        motivoId,\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess(`Corte registrado: ${peso}g`);\r\n        await fetchUnidades();\r\n        setTimeout(() => setSuccess(''), 3000);\r\n        return { success: true };\r\n      } else {\r\n        const errorData = await response.json();\r\n        setError(errorData.error || 'Error al registrar el corte');\r\n        return { success: false };\r\n      }\r\n    } catch (error) {\r\n      setError('Error de conexión con el servidor');\r\n      return { success: false };\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const deleteUnidad = async (unidadId: number) => {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const response = await apiService.deleteUnidad(apiFetch, unidadId);\r\n      if (response.ok) {\r\n        setSuccess('Unidad eliminada correctamente');\r\n        await fetchUnidades();\r\n        setTimeout(() => setSuccess(''), 3000);\r\n        return { success: true };\r\n      } else {\r\n        const errorData = await response.json();\r\n        setError(errorData.error || 'Error al eliminar unidad');\r\n        return { success: false };\r\n      }\r\n    } catch (error) {\r\n      setError('Error de conexión con el servidor');\r\n      return { success: false };\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const clearMessages = () => {\r\n    setError('');\r\n    setSuccess('');\r\n  };\r\n\r\n  return {\r\n    unidades,\r\n    productos,\r\n    motivos,\r\n    loading,\r\n    error,\r\n    success,\r\n    fetchUnidades,\r\n    fetchProductos,\r\n    fetchMotivos,\r\n    createUnidad,\r\n    updateUnidad,\r\n    deleteUnidad,  // ← NUEVO\r\n    createParticion,\r\n    clearMessages,\r\n    setError,\r\n    setSuccess,\r\n  };\r\n\r\n\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}